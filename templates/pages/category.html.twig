{% extends "layout.html.twig" %}

{% block title %}
	{{ category.name }}
	{{ parent() }}
{% endblock %}

{% block head %}{% endblock %}

{% block main %}
	<main id="content" class="articles">
		<section class="all-products">
			<h1>{{ category.name }}</h1>


			<form action="sort-result-category" method="POST" class="form-sort">
				<input type="hidden" name="slug" value="{{ category.slug }}">
				<select name="order-by" class="order-by">
					<option value="">--Trier les resultats--</option>
					<option value="price_asc">Trier par prix croissant</option>
					<option value="price_desc">Trier par prix décroissant</option>
					<option value="popularity">Trier par popularité</option>
				</select>
				<button type="submit">Rechercher</button>
			</form>


			{% for article in articles %}
				{% if article.stock != 0 %}
					<article class="product">
						<a href="/article/{{ article.slug }}">
							<img src="{{ article.image.getUrl() }}" alt="{{ article.image.getAlt() }}"/>
							<h3>{{ article.name }}</h3>
							<p class="price">{{ article.price }}€</p>
						</a>
					</article>
				{% else %}
					<article class="product">
						<img src="{{ article.image.getUrl() }}" alt="{{ article.image.getAlt() }}"/>
						<h3>{{ article.name }}</h3>
						<p class="price">{{ article.price }}€</p>
						<p class="out-of-stock">Rupture de stock</p>
					</article>
				{% endif %}
			{% endfor %}
		</section>
	</main>
{% endblock %}

{% block javascript %}{% endblock %}
